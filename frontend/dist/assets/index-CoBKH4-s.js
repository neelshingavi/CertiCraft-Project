import{j as e,r,a as de}from"./react-BmnrCYYH.js";import{c as pe}from"./react-dom-BUjXNCE-.js";import{L as me,u as xe,B as fe}from"./react-router-dom-aPRO6EvZ.js";import{a as ge}from"./axios-B9ygI19o.js";import{O as je}from"./@lottiefiles-C-tjJ_aI.js";import{b as re,d as ve,e as ue,f as Ne,g as H}from"./react-router-B2TF2A2E.js";import{R as be,B as ye,C as we,X as Se,Y as Ce,T as Ee,L as Ae,a as ce}from"./recharts-bn7VJFy6.js";import"./es-toolkit-DeNz-Ftr.js";import"./scheduler-DYLXRpC5.js";import"./@remix-run-CZlbrkBb.js";import"./clsx-B-dksMZM.js";import"./react-is-D_P3mdcN.js";import"./tiny-invariant-BaFNuDhB.js";import"./d3-shape-CTij_K8F.js";import"./d3-path-CimkQT29.js";import"./reselect-CiXCCDx7.js";import"./@reduxjs-D_WUMcRq.js";import"./redux-BXkGT1VS.js";import"./redux-thunk-ClJT1hhx.js";import"./react-redux-oVYCv_FF.js";import"./use-sync-external-store-CdU9EFI4.js";import"./immer-BZTISVQZ.js";import"./victory-vendor-eFgrrWDw.js";import"./d3-scale-DCNNTN8k.js";import"./internmap-BkD7Hj8s.js";import"./d3-array-g_qRI3rN.js";import"./d3-time-format-j2_s_XYn.js";import"./d3-time-g9mLz1m7.js";import"./d3-interpolate-CvRPKVI0.js";import"./d3-color-9lF95FHy.js";import"./d3-format-CzD4bSOQ.js";import"./decimal.js-light-ZKFLnszB.js";import"./eventemitter3-D8U8BYHk.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))d(l);new MutationObserver(l=>{for(const m of l)if(m.type==="childList")for(const b of m.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&d(b)}).observe(document,{childList:!0,subtree:!0});function n(l){const m={};return l.integrity&&(m.integrity=l.integrity),l.referrerPolicy&&(m.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?m.credentials="include":l.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(l){if(l.ep)return;l.ep=!0;const m=n(l);fetch(l.href,m)}})();const S=ge.create({baseURL:"http://localhost:8080/api",headers:{"Content-Type":"application/json"}});S.interceptors.request.use(a=>{const s=localStorage.getItem("token");return s&&(a.headers.Authorization=`Bearer ${s}`),a},a=>Promise.reject(a));S.interceptors.response.use(a=>a,a=>{var s;return((s=a.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(a)});const J={register:async a=>{const s=await S.post("/auth/register",a);return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify({id:s.data.id,email:s.data.email,fullName:s.data.fullName}))),s.data},login:async a=>{const s=await S.post("/auth/login",a);return s.data.token&&(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify({id:s.data.id,email:s.data.email,fullName:s.data.fullName}))),s.data},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},getCurrentUser:()=>{const a=localStorage.getItem("user");return a?JSON.parse(a):null},isAuthenticated:()=>!!localStorage.getItem("token")},ie={getAllEvents:async()=>(await S.get("/events")).data,getEventById:async a=>(await S.get(`/events/${a}`)).data,createEvent:async a=>(await S.post("/events",a)).data,updateEvent:async(a,s)=>(await S.put(`/events/${a}`,s)).data,deleteEvent:async a=>(await S.delete(`/events/${a}`)).data},se={uploadParticipants:async(a,s)=>{const n=new FormData;return n.append("file",s),(await S.post(`/events/${a}/participants/upload`,n,{headers:{"Content-Type":"multipart/form-data"}})).data},addParticipant:async(a,{name:s,email:n})=>(await S.post(`/events/${a}/participants`,{name:s,email:n})).data,getParticipants:async a=>(await S.get(`/events/${a}/participants`)).data,deleteParticipant:async(a,s)=>(await S.delete(`/events/${a}/participants/${s}`)).data,deleteAllParticipants:async a=>(await S.delete(`/events/${a}/participants/all`)).data},B={generateCertificates:async a=>(await S.post(`/certificates/events/${a}/generate`)).data,getCertificateStatus:async a=>(await S.get(`/certificates/events/${a}/status`)).data,downloadCertificate:async a=>(await S.get(`/certificates/${a}/download`,{responseType:"blob"})).data,downloadAllCertificates:async a=>(await S.get(`/certificates/events/${a}/download-all`,{responseType:"blob"})).data,sendCertificateEmail:async a=>(await S.post(`/certificates/${a}/send-email`)).data,sendAllEmails:async a=>(await S.post(`/certificates/events/${a}/send-all`)).data,sendUpdateEmails:async(a,s,n)=>(await S.post(`/certificates/events/${a}/send-updates`,{subject:s,content:n})).data,resendUpdateEmail:async a=>(await S.post(`/certificates/${a}/resend-update`)).data},oe={uploadTemplate:async(a,s)=>{const n=new FormData;return n.append("file",s),(await S.post(`/events/${a}/template/upload`,n,{headers:{"Content-Type":"multipart/form-data"}})).data},getTemplate:async a=>{try{return(await S.get(`/events/${a}/template`)).data}catch(s){if(s.response&&s.response.status===404)return null;throw s}},deleteTemplate:async a=>(await S.delete(`/events/${a}/template`)).data,updateCoordinates:async(a,s)=>(await S.post(`/events/${a}/template/coordinates`,s)).data},F={inviteCollaborator:async(a,s)=>(await S.post(`/events/${a}/collaborators/invite`,{email:s})).data,getRequests:async()=>(await S.get("/collaboration/requests")).data,acceptRequest:async a=>(await S.post(`/collaboration/requests/${a}/accept`)).data,declineRequest:async a=>(await S.post(`/collaboration/requests/${a}/decline`)).data,getCollaborators:async a=>(await S.get(`/events/${a}/collaborators`)).data,removeCollaborator:async(a,s)=>(await S.delete(`/events/${a}/collaborators/${s}`)).data,searchUsers:async a=>(await S.get(`/users/search?email=${encodeURIComponent(a)}`)).data,resendInvitation:async(a,s)=>(await S.post(`/events/${a}/collaborators/${s}/resend`)).data,getSentRequests:async()=>(await S.get("/collaboration/sent-requests")).data,getCollaboratorLogs:async(a,s)=>(await S.get(`/events/${a}/collaborators/${s}/logs`)).data,getOwnedEventsLogs:async()=>(await S.get("/collaboration/owned-events/logs")).data},ke={getStats:async()=>(await S.get("/analytics/stats")).data},ne={sendMessages:async a=>(await S.post("/collaboration/messages/send",a)).data,getMessages:async(a,s=null)=>{const n=s?`/collaboration/messages/event/${a}?partnerId=${s}`:`/collaboration/messages/event/${a}`;return(await S.get(n)).data},getUnreadCount:async()=>(await S.get("/collaboration/messages/unread-count")).data,getUnreadMessages:async()=>(await S.get("/collaboration/messages/unread")).data,markAsRead:async a=>(await S.post(`/collaboration/messages/event/${a}/read`)).data},le=()=>e.jsx("div",{className:"loading-overlay",children:e.jsx("div",{className:"loading-content",children:e.jsx("div",{className:"lottie-container",children:e.jsx(je,{src:"https://lottie.host/897a2bc8-dc6b-481d-b7b3-f1728677a47d/giR3l29pyS.lottie",loop:!0,autoplay:!0})})})});function De(){const a=re(),[s,n]=r.useState({email:"",password:""}),[d,l]=r.useState(""),[m,b]=r.useState(!1),[c,o]=r.useState(!1),u=`Streamline your certificate workflow
with automated generation and dispatch.`,[x,A]=r.useState(""),[T,y]=r.useState(0);r.useEffect(()=>{if(T<u.length){const w=setTimeout(()=>{A(I=>I+u.charAt(T)),y(I=>I+1)},50);return()=>clearTimeout(w)}},[T]);const k=w=>{n({...s,[w.target.name]:w.target.value})},D=async w=>{var I,q;w.preventDefault(),l(""),b(!0);try{await J.login(s),o(!0),setTimeout(()=>{a("/dashboard")},4e3)}catch(R){l(((q=(I=R.response)==null?void 0:I.data)==null?void 0:q.message)||"Login failed. Please check your credentials."),b(!1)}},j=()=>{const w="http://localhost:8080";window.location.href=`${w}/auth/google`};return e.jsxs("div",{className:"auth-container",children:[c&&e.jsx(le,{}),e.jsxs("div",{className:"auth-card-landscape auth-page-animation",children:[e.jsxs("div",{className:"login-left",children:[e.jsxs("div",{className:"brand-section fade-in-up",children:[e.jsx("div",{className:"logo-placeholder",children:e.jsx("img",{src:"/assets/bharti_logo.png",alt:"Bharati Vidyapeeth Logo",className:"logo-image"})}),e.jsx("h1",{className:"welcome-text",children:"Welcome !"}),e.jsx("div",{className:"typing-container",children:e.jsxs("p",{className:"brand-tagline",children:[x,e.jsx("span",{className:"typing-cursor"})]})})]}),e.jsxs("div",{className:"features-grid fade-in-up delay-1",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"âš¡"}),e.jsx("h3",{children:"Fast Generation"}),e.jsx("p",{children:"Generate certificates instantly"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"ðŸ”’"}),e.jsx("h3",{children:"Secure"}),e.jsx("p",{children:"Tamper-proof verification"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"ðŸ“¤"}),e.jsx("h3",{children:"Easy Dispatch"}),e.jsx("p",{children:"Send via email in one click"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"ðŸ“Š"}),e.jsx("h3",{children:"Analytics"}),e.jsx("p",{children:"Track your event success"})]})]})]}),e.jsxs("div",{className:"login-right fade-in-up delay-2",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:"Login Account"}),e.jsx("p",{className:"auth-subtitle",children:"Welcome back! Please enter your details."})]}),d&&e.jsx("div",{className:"alert alert-error",children:d}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email"}),e.jsx("input",{type:"email",name:"email",className:"form-input",placeholder:"Enter your email",value:s.email,onChange:k,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",name:"password",className:"form-input",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",value:s.password,onChange:k,required:!0})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:m,children:m?"Logging in...":"Sign in"})]}),e.jsxs("p",{className:"auth-footer",children:["Don't have an account? ",e.jsx(me,{to:"/register",children:"Sign up"})]}),e.jsx("div",{className:"btn-divider",children:"OR"}),e.jsxs("button",{onClick:j,className:"google-btn",children:[e.jsx("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",width:"18",height:"18"}),"Sign in with Google"]})]})]})]})}function Te(){const a=re(),[s,n]=r.useState({fullName:"",email:"",password:"",instituteName:""}),[d,l]=r.useState(""),[m,b]=r.useState(!1),[c,o]=r.useState(!1),u=`Empower your organization with
seamless certificate management.`,[x,A]=r.useState(""),[T,y]=r.useState(0);r.useEffect(()=>{if(T<u.length){const j=setTimeout(()=>{A(w=>w+u.charAt(T)),y(w=>w+1)},50);return()=>clearTimeout(j)}},[T]);const k=j=>{n({...s,[j.target.name]:j.target.value})},D=async j=>{var w,I;j.preventDefault(),l(""),b(!0);try{await J.register(s),o(!0),setTimeout(()=>{a("/dashboard")},1e3)}catch(q){l(((I=(w=q.response)==null?void 0:w.data)==null?void 0:I.message)||"Registration failed. Please try again."),b(!1)}};return e.jsxs("div",{className:"auth-container",children:[c&&e.jsx(le,{}),e.jsxs("div",{className:"auth-card-landscape auth-page-animation",children:[e.jsxs("div",{className:"login-left",children:[e.jsxs("div",{className:"brand-section fade-in-up",children:[e.jsx("div",{className:"logo-placeholder",children:e.jsx("img",{src:"/assets/bharti_logo.png",alt:"Logo",className:"logo-image"})}),e.jsx("h1",{className:"welcome-text",children:"Join Us !"}),e.jsx("div",{className:"typing-container",children:e.jsxs("p",{className:"brand-tagline",children:[x,e.jsx("span",{className:"typing-cursor"})]})})]}),e.jsxs("div",{className:"features-grid fade-in-up delay-1",children:[e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"âš¡"}),e.jsx("h3",{children:"Fast Generation"}),e.jsx("p",{children:"Generate certificates instantly"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"ðŸ”’"}),e.jsx("h3",{children:"Secure"}),e.jsx("p",{children:"Tamper-proof verification"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"ðŸ“¤"}),e.jsx("h3",{children:"Easy Dispatch"}),e.jsx("p",{children:"Send via email in one click"})]}),e.jsxs("div",{className:"feature-card",children:[e.jsx("span",{className:"feature-icon",children:"ðŸ“Š"}),e.jsx("h3",{children:"Analytics"}),e.jsx("p",{children:"Track your event success"})]})]})]}),e.jsxs("div",{className:"login-right fade-in-up delay-2",children:[e.jsxs("div",{className:"form-header",children:[e.jsx("h2",{children:"Create Account"}),e.jsx("p",{className:"auth-subtitle",children:"Get started with CertiCraft today."})]}),d&&e.jsx("div",{className:"alert alert-error",children:d}),e.jsxs("form",{onSubmit:D,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Full Name"}),e.jsx("input",{type:"text",name:"fullName",className:"form-input",placeholder:"Enter your full name",value:s.fullName,onChange:k,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",className:"form-input",placeholder:"name@example.com",value:s.email,onChange:k,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsx("input",{type:"password",name:"password",className:"form-input",placeholder:"Create a strong password",value:s.password,onChange:k,required:!0,minLength:"6"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Institute Name (Optional)"}),e.jsx("input",{type:"text",name:"instituteName",className:"form-input",placeholder:"University or Organization Name",value:s.instituteName,onChange:k})]}),e.jsx("button",{type:"submit",className:"btn btn-primary btn-full",disabled:m,children:m?"Creating account...":"Create Account"})]}),e.jsxs("p",{className:"auth-footer",children:["Already have an account? ",e.jsx(me,{to:"/login",children:"Sign in"})]})]})]})]})}function Ie({eventId:a,onClose:s,templateService:n,showToast:d,onTemplateSaved:l}){var X,E,M,z;const[m,b]=r.useState(null),[c,o]=r.useState(null),[u,x]=r.useState({nameX:null,nameY:null,qrX:null,qrY:null,fontSize:null,fontColor:null,qrSize:null}),[A,T]=r.useState(!1),[y,k]=r.useState(!1),[D,j]=r.useState("name"),w=r.useRef();r.useEffect(()=>{(async()=>{var h;try{const f=await n.getTemplate(a);if(!f){b(null),o(null),x({nameX:null,nameY:null,qrX:null,qrY:null,fontSize:40,fontColor:"#000000",qrSize:100});return}b(f),o(`data:${f.mimeType||"image/png"};base64,${f.imageData}`),x({nameX:f.nameX,nameY:f.nameY,qrX:f.qrX,qrY:f.qrY,fontSize:f.fontSize,fontColor:f.fontColor,qrSize:f.qrSize||100})}catch(f){((h=f==null?void 0:f.response)==null?void 0:h.status)===404?(b(null),o(null),x({nameX:null,nameY:null,qrX:null,qrY:null,fontSize:40,fontColor:"#000000",qrSize:100})):d("Failed to load template","error")}})()},[a]);const I=t=>{if(!w.current)return;const h=w.current,f=h.getBoundingClientRect(),g=t.clientX-f.left,U=t.clientY-f.top,Y=h.naturalWidth,_=h.naturalHeight,K=f.width,Q=f.height,Z=Math.max(0,Math.min(1,g/K)),ee=Math.max(0,Math.min(1,U/Q)),V=Math.round(Z*Y),N=Math.round(ee*_);D==="name"?x({...u,nameX:V,nameY:N}):D==="qr"&&x({...u,qrX:V,qrY:N})},q=async t=>{var h,f;if(t){k(!0);try{const g=await n.uploadTemplate(a,t);b(g),o(`data:${g.mimeType||"image/png"};base64,${g.imageData}`),x({nameX:null,nameY:null,qrX:null,qrY:null,fontSize:g.fontSize||40,fontColor:g.fontColor||"#000000",qrSize:g.qrSize||100}),T(!0),d("Template uploaded. Click on the image to set the name and QR code positions.","success"),l&&l()}catch(g){const U=((f=(h=g.response)==null?void 0:h.data)==null?void 0:f.error)||g.message||"Failed to upload template";d(U,"error")}finally{k(!1)}}},R=async()=>{if(u.nameX==null||u.nameY==null){d("Please click on the template to set the name center before saving.","error");return}if(u.qrX==null||u.qrY==null){d("Please click on the template to set the QR code position before saving.","error");return}try{await n.updateCoordinates(a,u),d("Template coordinates saved","success"),l&&l(),s()}catch{d("Failed to save coordinates","error")}},L=async()=>{if(window.confirm("Are you sure you want to remove this template? This will revert the event to having no template."))try{k(!0),await n.deleteTemplate(a),b(null),o(null),x({nameX:null,nameY:null,qrX:null,qrY:null,fontSize:40,fontColor:"#000000",qrSize:100}),d("Template removed","success"),l&&l()}catch{d("Failed to remove template","error")}finally{k(!1)}};return e.jsx("div",{className:"template-editor-overlay",children:e.jsxs("div",{className:"template-editor",children:[e.jsxs("div",{className:"template-editor-header",children:[e.jsx("h3",{children:m?"Edit Template":"Add Template"}),e.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Close"})]}),e.jsxs("div",{className:"template-editor-body",children:[c?e.jsxs("div",{className:"image-container",onClick:I,children:[e.jsx("img",{ref:w,src:c,alt:"Template"}),u.nameX!=null&&u.nameY!=null&&e.jsx("div",{className:"marker marker-name",style:{left:`calc(${u.nameX/(((X=w.current)==null?void 0:X.naturalWidth)||1)*100}% - 2px)`,top:`calc(${u.nameY/(((E=w.current)==null?void 0:E.naturalHeight)||1)*100}% - 2px)`}}),u.qrX!=null&&u.qrY!=null&&e.jsx("div",{className:"marker marker-qr",style:{left:`calc(${u.qrX/(((M=w.current)==null?void 0:M.naturalWidth)||1)*100}% - 2px)`,top:`calc(${u.qrY/(((z=w.current)==null?void 0:z.naturalHeight)||1)*100}% - 2px)`}})]}):e.jsxs("div",{className:"upload-container",children:[e.jsx("p",{children:"No template uploaded yet. Upload an image (PNG/JPG) and then click on the image to set the name and QR code positions."}),e.jsx("input",{type:"file",accept:"image/*",onChange:t=>q(t.target.files[0]),disabled:y}),A&&e.jsx("div",{style:{marginTop:8,color:"#666"},children:"Now click on the image to set positions."})]}),e.jsxs("div",{className:"controls",children:[e.jsxs("div",{style:{marginBottom:"12px",padding:"8px",background:"#f5f5f5",borderRadius:"4px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"bold"},children:"Click Mode:"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{onClick:()=>j("name"),className:`btn ${D==="name"?"btn-primary":"btn-secondary"}`,style:{flex:1,fontSize:"12px"},children:"Name Position"}),e.jsx("button",{onClick:()=>j("qr"),className:`btn ${D==="qr"?"btn-primary":"btn-secondary"}`,style:{flex:1,fontSize:"12px"},children:"QR Position"})]})]}),e.jsx("label",{children:"Font size"}),e.jsx("input",{type:"number",value:u.fontSize||"",onChange:t=>x({...u,fontSize:parseInt(t.target.value||"0")||null})}),e.jsx("label",{children:"Font color"}),e.jsx("input",{type:"color",value:u.fontColor||"#000000",onChange:t=>x({...u,fontColor:t.target.value})}),e.jsx("label",{children:"QR Code size (px)"}),e.jsx("input",{type:"number",value:u.qrSize||"",onChange:t=>x({...u,qrSize:parseInt(t.target.value||"0")||null}),placeholder:"100"}),e.jsxs("div",{className:"button-row",children:[e.jsx("button",{onClick:R,className:"btn btn-primary",disabled:u.nameX==null||u.nameY==null||u.qrX==null||u.qrY==null,children:"Save"}),e.jsx("button",{onClick:s,className:"btn btn-secondary",children:"Cancel"})]}),c&&e.jsx("button",{onClick:L,className:"btn btn-danger",style:{marginTop:"20px",width:"100%",padding:"10px",borderRadius:"6px",backgroundColor:"#fee2e2",color:"#dc2626",border:"1px solid #fecaca",cursor:"pointer",fontSize:"13px",fontWeight:"500"},disabled:y,children:y?"Removing...":"Remove this file & Choose New"})]})]})]})})}function Re({eventId:a,isOwner:s}){const[n,d]=r.useState([]),[l,m]=r.useState(!1),[b,c]=r.useState(""),[o,u]=r.useState([]),[x,A]=r.useState(!1),[T,y]=r.useState(""),[k,D]=r.useState(null),[j,w]=r.useState([]),[I,q]=r.useState(!1);r.useEffect(()=>{R()},[a]);const R=async()=>{try{const t=await F.getCollaborators(a);d(Array.isArray(t)?t:[])}catch(t){console.error("Failed to load collaborators:",t)}},L=async t=>{if(c(t),y(""),t.trim().length<3){u([]);return}try{const h=await F.searchUsers(t);u(Array.isArray(h)?h:[])}catch(h){console.error("Search failed:",h),u([])}},X=async t=>{var h,f,g,U;A(!0),y("");try{await F.inviteCollaborator(a,t),m(!1),c(""),u([]),await R()}catch(Y){y(((f=(h=Y.response)==null?void 0:h.data)==null?void 0:f.error)||((U=(g=Y.response)==null?void 0:g.data)==null?void 0:U.message)||"Failed to send invitation")}finally{A(!1)}},E=async t=>{var h,f;try{await F.resendInvitation(a,t),await R()}catch(g){alert(((f=(h=g.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to resend invitation")}},M=async t=>{var h,f;if(window.confirm("Are you sure you want to remove this collaborator?"))try{await F.removeCollaborator(a,t),await R()}catch(g){alert(((f=(h=g.response)==null?void 0:h.data)==null?void 0:f.message)||"Failed to remove collaborator")}},z=async t=>{A(!0),D(t);try{const h=await F.getCollaboratorLogs(a,t.userId);w(Array.isArray(h)?h:[]),q(!0)}catch{alert("Failed to load activity logs")}finally{A(!1)}};return e.jsxs("div",{className:"collaborators-tab",children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h3",{children:"Team Collaborators"}),s&&e.jsx("button",{className:"btn btn-primary",onClick:()=>m(!0),children:"+ Invite Collaborator"})]}),n.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"No collaborators yet. Invite team members to help manage this event!"})}):e.jsx("div",{className:"collaborators-list",children:n.map(t=>{var h,f;return e.jsxs("div",{className:`collaborator-card ${(h=t.status)==null?void 0:h.toLowerCase()}`,children:[e.jsxs("div",{className:"collaborator-info",children:[e.jsx("div",{className:"avatar",children:"ðŸ‘¤"}),e.jsxs("div",{className:"details",children:[e.jsx("h4",{children:t.name}),e.jsx("p",{children:t.email}),e.jsxs("div",{className:"badge-row",children:[e.jsx("span",{className:"role-badge",children:t.role}),e.jsx("span",{className:`status-badge ${(f=t.status)==null?void 0:f.toLowerCase()}`,children:t.status})]})]})]}),e.jsxs("div",{className:"collaborator-actions",children:[s&&t.status==="DECLINED"&&e.jsx("button",{className:"btn-resend",onClick:()=>E(t.userId),children:"Send Again"}),s&&t.status==="ACCEPTED"&&e.jsx("button",{className:"btn-history",onClick:()=>z(t),style:{marginRight:"8px"},children:"History"}),s&&e.jsx("button",{className:"btn-remove",onClick:()=>M(t.userId),children:"Remove"})]})]},t.userId)})}),l&&e.jsx("div",{className:"modal-overlay",onClick:()=>m(!1),children:e.jsxs("div",{className:"modal-content",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:"Invite Collaborator"}),e.jsx("button",{className:"close-btn",onClick:()=>m(!1),children:"Ã—"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("input",{type:"email",className:"search-input",placeholder:"Search by email...",value:b,onChange:t=>{c(t.target.value),window.searchTimeout&&clearTimeout(window.searchTimeout),window.searchTimeout=setTimeout(()=>{L(t.target.value)},500)},autoFocus:!0}),x&&e.jsx("div",{style:{textAlign:"center",color:"#666",margin:"10px 0"},children:"Searching..."}),T&&e.jsx("div",{className:"error-message",children:T}),o.length>0&&e.jsx("div",{className:"search-results",children:o.map(t=>e.jsxs("div",{className:"user-result",children:[e.jsxs("div",{className:"user-info",children:[e.jsx("div",{className:"avatar-small",children:"ðŸ‘¤"}),e.jsxs("div",{children:[e.jsx("div",{className:"user-name",children:t.name}),e.jsx("div",{className:"user-email",children:t.email})]})]}),e.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>X(t.email),disabled:x,children:x?"Sending...":"Invite"})]},t.id))}),b.trim().length>=3&&o.length===0&&e.jsx("div",{className:"no-results",children:"No users found"})]})]})}),I&&e.jsx("div",{className:"modal-overlay",onClick:()=>q(!1),children:e.jsxs("div",{className:"modal-content log-modal",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h3",{children:["Activity History: ",k==null?void 0:k.name]}),e.jsx("button",{className:"close-btn",onClick:()=>q(!1),children:"Ã—"})]}),e.jsx("div",{className:"modal-body",children:j.length===0?e.jsx("p",{className:"no-logs",children:"No activity recorded yet."}):e.jsx("div",{className:"logs-container",children:j.map((t,h)=>e.jsxs("div",{className:"log-item",children:[e.jsx("div",{className:"log-action",children:t.action.replace(/_/g," ")}),e.jsx("div",{className:"log-details",children:t.details}),e.jsx("div",{className:"log-time",children:new Date(t.timestamp).toLocaleString()})]},h))})})]})})]})}function $e({eventId:a,event:s,isOwner:n}){const[d,l]=r.useState([]),[m,b]=r.useState(""),[c,o]=r.useState({announcements:""}),[u,x]=r.useState([]),[A,T]=r.useState(!1),[y,k]=r.useState(null),D=J.getCurrentUser(),j=r.useRef(null),w=y||"announcements",I=()=>{var t;(t=j.current)==null||t.scrollIntoView({behavior:"smooth"})};r.useEffect(()=>{I()},[u]),r.useEffect(()=>{q()},[a]),r.useEffect(()=>{R();const t=setInterval(R,3e3);return()=>clearInterval(t)},[a,y]);const q=async()=>{try{const t=await F.getCollaborators(a),h=Array.isArray(t)?t.filter(g=>g.status==="ACCEPTED"):[],f=[];s.organizerId!==D.id&&f.push({userId:s.organizerId,name:s.organizerName||"Organizer",email:s.organizerEmail||"",role:"OWNER"}),h.forEach(g=>{g.id!==D.id&&f.push({userId:g.id,name:g.name,email:g.email,role:g.role})}),l(f)}catch(t){console.error("Failed to load members:",t)}},R=async()=>{try{const t=await ne.getMessages(a,y);if(Array.isArray(t)){const h=t.map(g=>({...g,content:g.text,senderName:g.sender,isRead:g.isRead||!1}));x(h),h.filter(g=>!g.isRead&&Number(g.senderId)!==Number(D.id)).length>0&&await ne.markAsRead(a)}else x([])}catch(t){console.error("Failed to load messages:",t)}},L=async t=>{t.preventDefault();const h=c[w]||"";if(h.trim()){T(!0);try{const f=await ne.sendMessages({eventId:a,text:h,receiverId:y});o(g=>({...g,[w]:""})),R()}catch(f){console.error("Failed to send message:",f)}finally{T(!1)}}},X=t=>{o(h=>({...h,[w]:t}))},E=m.trim()?d.filter(t=>t.name&&t.name.toLowerCase().includes(m.toLowerCase())||t.email&&t.email.toLowerCase().includes(m.toLowerCase())):d,M=t=>{const h=["#00a884","#1f7aec","#d43b2f","#7e2dcf","#aa831b"];let f=0;if(!t)return h[0];for(let g=0;g<t.length;g++)f=t.charCodeAt(g)+((f<<5)-f);return h[Math.abs(f)%h.length]},z=()=>{if(!y)return"Announcements";const t=d.find(h=>h.userId===y);return t?t.name:"Team Member"};return e.jsxs("div",{className:"messages-tab",children:[e.jsxs("div",{className:"members-sidebar",children:[e.jsx("div",{className:"sidebar-header",children:e.jsx("h3",{children:"Team Members"})}),e.jsx("div",{className:"search-bar-container",children:e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("i",{className:"fa-solid fa-magnifying-glass"}),e.jsx("input",{type:"text",placeholder:"Search team members...",value:m,onChange:t=>b(t.target.value)})]})}),e.jsxs("div",{className:"members-list",children:[e.jsxs("div",{className:`member-item ${y===null?"active":""}`,onClick:()=>k(null),children:[e.jsx("div",{className:"avatar",style:{backgroundColor:"#00a884"},children:e.jsx("i",{className:"fa-solid fa-bullhorn",style:{fontSize:"14px"}})}),e.jsxs("div",{className:"member-info",children:[e.jsx("div",{className:"member-name",children:"Announcements"}),e.jsx("div",{className:"member-status",children:"Team Group Chat"})]})]}),E.map((t,h)=>e.jsxs("div",{className:`member-item ${y===t.userId?"active":""}`,onClick:()=>k(t.userId),children:[e.jsx("div",{className:"avatar",style:{backgroundColor:M(t.name)},children:t.name?t.name.charAt(0).toUpperCase():t.email?t.email.charAt(0).toUpperCase():"?"}),e.jsxs("div",{className:"member-info",children:[e.jsxs("div",{className:"member-name",children:[t.name||t.email,t.role==="OWNER"&&e.jsx("span",{className:"role-badge",children:"Owner"})]}),e.jsx("div",{className:"member-status",children:t.name?t.email:"Team Member"})]})]},h))]})]}),e.jsxs("div",{className:"chat-area",children:[e.jsxs("div",{className:"chat-header",children:[e.jsx("div",{className:"avatar",style:{backgroundColor:"#00a884",width:"40px",height:"40px",fontSize:"18px"},children:y?e.jsx("i",{className:"fa-solid fa-user"}):e.jsx("i",{className:"fa-solid fa-bullhorn"})}),e.jsxs("div",{className:"chat-title",children:[e.jsx("h3",{children:s.eventName}),e.jsx("div",{className:"chat-subtitle",children:z()})]})]}),e.jsxs("div",{className:"messages-container",children:[u.length===0&&e.jsx("div",{className:"empty-chat-placeholder",children:e.jsx("p",{children:"No messages yet in this chat."})}),u.map((t,h)=>{const f=Number(t.senderId)===Number(D.id);return e.jsxs("div",{className:`message-bubble ${f?"message-sent":"message-received"}`,children:[!f&&!y&&e.jsx("div",{className:"message-sender-name",style:{color:M(t.senderName)},children:t.senderName||"Anonymous"}),e.jsx("div",{children:t.content}),e.jsxs("div",{className:"message-time",children:[new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),f&&e.jsx("i",{className:`fa-solid fa-check-double done-all-icon ${t.isRead?"read":""}`,style:{color:t.isRead?"#53bdeb":"#8696a0"}})]})]},h)}),e.jsx("div",{ref:j})]}),e.jsxs("div",{className:"chat-input-area",children:[e.jsx("form",{onSubmit:L,className:"input-wrapper",style:{margin:"0 10px 0 0"},children:e.jsx("input",{type:"text",placeholder:y?`Message ${z()}...`:"Send an announcement...",value:c[w]||"",onChange:t=>X(t.target.value)})}),e.jsx("button",{onClick:L,className:"btn-send-round",disabled:!(c[w]||"").trim(),children:A?e.jsx("i",{className:"fa-solid fa-spinner fa-spin"}):e.jsx("i",{className:"fa-solid fa-paper-plane"})})]})]})]})}function Le({participants:a,onFileUpload:s,onAddParticipant:n,onGenerateCertificates:d,onDeleteParticipant:l,onDeleteAllParticipants:m,onGoToUpdates:b,loading:c}){return e.jsxs("div",{className:"tab-content",children:[e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Upload Participants"}),e.jsxs("p",{className:"help-text",children:["Upload a CSV or Excel file with columns: ",e.jsx("strong",{children:"Name"})," and ",e.jsx("strong",{children:"Email"})]}),e.jsxs("div",{className:"upload-section action-grid",children:[e.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:s,disabled:c,id:"file-upload",className:"file-input"}),e.jsx("label",{htmlFor:"file-upload",className:"btn btn-primary action-btn",children:"Choose File"}),e.jsx("button",{onClick:d,className:"btn btn-primary action-btn",disabled:c,children:"Generate Certificates"}),e.jsx("button",{onClick:b,className:"btn btn-primary action-btn",disabled:c,children:"Send Updates"})]}),e.jsx("hr",{style:{margin:"20px 0",borderColor:"#eee"}}),e.jsx("h3",{children:"Add Participant Manually"}),e.jsxs("form",{onSubmit:n,className:"manual-add-form",style:{display:"flex",gap:"10px",alignItems:"flex-end",marginTop:"10px"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"form-label",style:{fontSize:"12px",marginBottom:"5px",display:"block"},children:"Name"}),e.jsx("input",{name:"name",className:"form-input",required:!0,placeholder:"Participant Name"})]}),e.jsxs("div",{style:{flex:1},children:[e.jsx("label",{className:"form-label",style:{fontSize:"12px",marginBottom:"5px",display:"block"},children:"Email"}),e.jsx("input",{name:"email",type:"email",className:"form-input",required:!0,placeholder:"participant@example.com"})]}),e.jsx("button",{type:"submit",className:"btn btn-secondary",disabled:c,style:{marginBottom:"0"},children:"Add"})]})]}),Array.isArray(a)&&a.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"participant-actions",children:[e.jsxs("h3",{children:["Participants List (",a.length,")"]}),e.jsx("button",{onClick:m,className:"delete-all-btn",disabled:c,children:"Remove All Participants"})]}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:Array.isArray(a)&&a.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.name}),e.jsx("td",{children:o.email}),e.jsx("td",{children:e.jsx("button",{onClick:()=>l(o.id),className:"btn-remove",disabled:c,children:"Remove"})})]},o.id))})]})})]})]})}function qe({certificates:a,template:s,onDownloadCertificate:n,onDownloadAll:d,onSendEmail:l,onSendAllEmails:m,onEditTemplate:b,loading:c}){const o=Array.isArray(a)?a.filter(x=>x.generationStatus==="GENERATED").length:0,u=x=>({GENERATED:"success",SENT:"success",FAILED:"error",PENDING:"warning",SENDING:"info",NOT_GENERATED:"warning",NOT_SENT:"neutral"})[x]||"info";return e.jsxs("div",{className:"tab-content",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"certificate-actions",children:[e.jsx("h3",{children:"Certificate Actions"}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{onClick:d,className:"btn btn-primary",disabled:c||o===0,children:"Download All as ZIP"}),e.jsx("button",{onClick:m,className:"btn btn-secondary",disabled:c||o===0,children:"Email All Certificates"}),"                        ",e.jsx("button",{onClick:b,className:"btn btn-outline",children:s?"Edit Template":"Add Template"}),"                    "]})]})}),Array.isArray(a)&&a.length>0&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Certificate Status"}),e.jsx("div",{className:"table-container",children:e.jsxs("table",{children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Participant Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Generation Status"}),e.jsx("th",{children:"Email Status"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:Array.isArray(a)&&a.map((x,A)=>e.jsxs("tr",{children:[e.jsx("td",{children:x.participantName}),e.jsx("td",{children:x.email}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${u(x.generationStatus)}`,children:x.generationStatus})}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${u(x.emailStatus)}`,children:x.emailStatus})}),e.jsx("td",{children:x.generationStatus==="GENERATED"&&e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:()=>n(x.id),className:"btn btn-primary btn-sm",children:"Download"}),e.jsx("button",{onClick:()=>l(x.id),className:"btn btn-secondary btn-sm",disabled:x.emailStatus==="SENDING",children:x.emailStatus==="SENT"?"Resend":x.emailStatus==="FAILED"?"Retry":"Send"})]})})]},A))})]})})]})]})}function Pe({onSendUpdates:a,onResendUpdate:s,loading:n,participantCount:d,certificateStatus:l=[]}){const[m,b]=r.useState({subject:"",content:""}),c=o=>{o.preventDefault(),a(m)};return e.jsxs("div",{className:"tab-content updates-grid",children:[e.jsxs("div",{className:"status-card",children:[e.jsxs("h3",{children:["Live Status (",l.length,")"]}),e.jsx("div",{className:"status-list-container",children:e.jsxs("table",{className:"status-list-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Participant"}),e.jsx("th",{children:"Status"})]})}),e.jsxs("tbody",{children:[Array.isArray(l)&&l.map(o=>e.jsxs("tr",{children:[e.jsx("td",{children:o.participantName}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("span",{className:`status-badge status-${(o.updateEmailStatus||"NOT_SENT").toLowerCase()}`,children:o.updateEmailStatus||"NOT_SENT"}),o.updateEmailStatus==="FAILED"&&e.jsx("button",{onClick:()=>s(o.id),className:"btn btn-sm btn-secondary",style:{padding:"4px 8px",fontSize:"12px"},children:"Retry"})]})})]},o.id)),l.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"2",style:{textAlign:"center",color:"#888"},children:"No participants loaded."})})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Send Mass Updates"}),e.jsxs("p",{className:"help-text",children:["This message will be sent to all ",e.jsx("strong",{children:d})," participants."]}),e.jsxs("form",{onSubmit:c,className:"update-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Email Subject"}),e.jsx("input",{type:"text",className:"form-input",placeholder:"e.g., Important Update: Event Date Changed",value:m.subject,onChange:o=>b({...m,subject:o.target.value}),required:!0,disabled:n})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Message Content"}),e.jsx("textarea",{className:"form-input",style:{minHeight:"300px",resize:"vertical"},placeholder:"Write your update message here...",value:m.content,onChange:o=>b({...m,content:o.target.value}),required:!0,disabled:n}),e.jsx("p",{className:"small-text mt-1",children:"* Note: The organizer's name will be automatically added as a signature."})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",marginTop:"16px"},disabled:n||d===0,children:n?"Sending Emails...":"Send Updates to All"})]})]})]})}const Fe=({message:a,type:s,onClose:n,duration:d=3e3})=>(r.useEffect(()=>{const l=setTimeout(()=>{n()},d);return()=>clearTimeout(l)},[n,d]),e.jsx("div",{className:"toast-overlay show",children:e.jsxs("div",{className:`toast-container toast-${s}`,children:[e.jsxs("div",{className:"toast-icon",children:[s==="success"&&"âœ…",s==="error"&&"âŒ",s==="info"&&"â„¹ï¸"]}),e.jsx("div",{className:"toast-message",children:a}),e.jsx("button",{className:"toast-close",onClick:n,children:"Ã—"})]})}));function ze({event:a,onBack:s,onNotify:n,initialTab:d="participants"}){const l=J.getCurrentUser(),m=!!(l&&(l.id&&l.id===a.organizerId||l.email&&a.organizerEmail&&l.email===a.organizerEmail)),[b,c]=r.useState(d),[o,u]=r.useState([]),[x,A]=r.useState([]),[T,y]=r.useState(!1),[k,D]=r.useState(!1),[j,w]=r.useState(!1),[I,q]=r.useState(null),R=async()=>{try{const i=await oe.getTemplate(a.id).catch(v=>null);q(i)}catch(i){console.error("Failed to load template:",i),q(null)}},[L,X]=r.useState({show:!1,message:"",type:""}),E=(i,v="success")=>{X({show:!0,message:i,type:v})},M=()=>{X({...L,show:!1})},z=()=>{D(!0),E("First upload participants list","error"),setTimeout(()=>D(!1),400)};r.useEffect(()=>{t(),g(),R()},[a.id]),r.useEffect(()=>{if(!Array.isArray(x))return;if(x.some(v=>v.generationStatus==="PENDING"||v.emailStatus==="SENDING"||v.updateEmailStatus==="SENDING")){const v=setInterval(()=>{g()},3e3);return()=>clearInterval(v)}},[x]);const t=async()=>{try{const i=await se.getParticipants(a.id);u(Array.isArray(i)?i:[])}catch(i){console.error("Failed to load participants:",i),u([])}},h=async i=>{try{await se.deleteParticipant(a.id,i),E("Participant removed","success"),await t(),await g()}catch{E("Failed to remove participant","error")}},f=async()=>{if(window.confirm("Are you sure you want to remove ALL participants? This will also delete any generated certificates.")){y(!0);try{await se.deleteAllParticipants(a.id),E("All participants removed","success"),await t(),await g()}catch{E("Failed to remove all participants","error")}finally{y(!1)}}},g=async()=>{try{const i=await B.getCertificateStatus(a.id);A(Array.isArray(i)?i:[])}catch(i){console.error("Failed to load certificate status:",i),A([])}},U=async i=>{var C,p;const v=i.target.files[0];if(v){y(!0);try{await se.uploadParticipants(a.id,v),E("Participants uploaded successfully!","success"),n==null||n("success",`Participants uploaded for ${a.eventName}`),await t(),await g()}catch($){const G=((p=(C=$.response)==null?void 0:C.data)==null?void 0:p.error)||"Failed to upload participants";E(G,"error"),n==null||n("error",G)}finally{y(!1),i.target.value=""}}},Y=async()=>{var i,v;if(o.length===0){z();return}y(!0);try{await B.generateCertificates(a.id),E("Certificates generated successfully!","success"),n==null||n("success",`Certificates generated for ${a.eventName}`),await g(),c("certificates")}catch(C){const p=((v=(i=C.response)==null?void 0:i.data)==null?void 0:v.error)||"Failed to generate certificates";E(p,"error"),n==null||n("error",p)}finally{y(!1)}},_=async i=>{try{const v=await B.downloadCertificate(i),C=window.URL.createObjectURL(v),p=document.createElement("a");p.href=C,p.download=`certificate_${i}.pdf`,document.body.appendChild(p),p.click(),window.URL.revokeObjectURL(C),document.body.removeChild(p)}catch{E("Failed to download certificate","error")}},K=async()=>{var i,v;y(!0);try{const C=await B.downloadAllCertificates(a.id),p=window.URL.createObjectURL(C),$=document.createElement("a");$.href=p,$.download=`${a.eventName}_certificates.zip`,document.body.appendChild($),$.click(),window.URL.revokeObjectURL(p),document.body.removeChild($),E("All certificates downloaded!","success")}catch(C){E(((v=(i=C.response)==null?void 0:i.data)==null?void 0:v.error)||"Failed to download certificates","error")}finally{y(!1)}},Q=async i=>{A(v=>v.map(C=>C.id===i?{...C,emailStatus:"SENDING"}:C));try{await B.sendCertificateEmail(i),await g()}catch{E("Failed to send email. Check SMTP configuration.","error"),await g()}},Z=async()=>{A(i=>i.map(v=>v.generationStatus==="GENERATED"?{...v,emailStatus:"SENDING"}:v)),y(!0);try{await B.sendAllEmails(a.id),await g()}catch{const v="Failed to send emails. Check SMTP configuration.";E(v,"error"),n==null||n("error",v),await g()}finally{y(!1)}},ee=async i=>{var v,C;A(p=>Array.isArray(p)?p.map($=>({...$,updateEmailStatus:"SENDING"})):p),y(!0);try{await B.sendUpdateEmails(a.id,i.subject,i.content),n==null||n("success",`Updates sent for ${a.eventName}`),setTimeout(g,1e3)}catch(p){const $=((C=(v=p.response)==null?void 0:v.data)==null?void 0:C.error)||"Failed to send updates";E($,"error"),n==null||n("error",$),await g()}finally{y(!1)}},V=async i=>{try{await B.resendUpdateEmail(i),E('Email status reset. Please include in next "Send Mass Updates" batch.',"success"),await g()}catch{E("Failed to reset status","error")}},N=async i=>{var $,G;i.preventDefault();const v=new FormData(i.target),C=v.get("name"),p=v.get("email");if(!(!C||!p)){y(!0);try{await se.addParticipant(a.id,{name:C,email:p}),E("Participant added","success"),i.target.reset(),await t()}catch(O){const P=((G=($=O.response)==null?void 0:$.data)==null?void 0:G.error)||"Failed to add participant";E(P,"error")}finally{y(!1)}}};return e.jsxs("div",{className:"dashboard-container",children:[L.show&&e.jsx(Fe,{message:L.message,type:L.type,onClose:M}),e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"navbar-content",children:[e.jsx("div",{className:"navbar-brand",children:e.jsxs("div",{className:"brand-logo-container",children:[e.jsx("img",{src:"/assets/bharti_logo.png",alt:"Logo",className:"navbar-logo"}),e.jsxs("div",{className:"brand-text-container",children:[e.jsx("h2",{children:"CertiCraft"}),e.jsx("div",{className:"brand-line"})]})]})}),e.jsx("div",{className:"secondary-actions",children:e.jsx("div",{className:"navbar-actions",children:e.jsx("button",{onClick:s,className:"btn btn-secondary btn-sm",children:"â† Back"})})})]})}),e.jsxs("div",{className:`container ${k?"vibrate":""}`,children:[e.jsxs("div",{className:"event-header",children:[e.jsx("h1",{children:a.eventName}),e.jsxs("p",{className:"event-meta",children:[new Date(a.eventDate).toLocaleDateString()," â€¢ ",a.organizerName]})]}),e.jsxs("div",{className:"tabs",children:[e.jsx("button",{className:`tab ${b==="participants"?"active":""}`,onClick:()=>c("participants"),children:"Participants"}),e.jsx("button",{className:`tab ${b==="certificates"?"active":""}`,onClick:()=>c("certificates"),children:"Certificates"}),e.jsx("button",{className:`tab ${b==="updates"?"active":""}`,onClick:()=>c("updates"),children:"Send Updates"}),e.jsx("button",{className:`tab ${b==="team"?"active":""}`,onClick:()=>c("team"),children:"Team"}),e.jsx("button",{className:`tab ${b==="messages"?"active":""}`,onClick:()=>c("messages"),children:"Team Messages"})]}),b==="participants"&&e.jsx(Le,{participants:o,certificateStatus:x,onFileUpload:U,onAddParticipant:N,onGenerateCertificates:Y,onDeleteParticipant:h,onDeleteAllParticipants:f,onGoToUpdates:()=>o.length>0?c("updates"):z(),loading:T}),b==="certificates"&&e.jsx(qe,{certificates:x,template:I,onDownloadCertificate:_,onDownloadAll:K,onSendEmail:Q,onSendAllEmails:Z,onEditTemplate:()=>w(!0),loading:T}),j&&e.jsx(Ie,{eventId:a.id,templateService:oe,showToast:E,onClose:()=>{w(!1),R()},onTemplateSaved:()=>R()}),b==="updates"&&e.jsx(Pe,{onSendUpdates:ee,onResendUpdate:V,loading:T,participantCount:o.length,certificateStatus:x}),b==="team"&&e.jsx(Re,{eventId:a.id,isOwner:m}),b==="messages"&&e.jsx($e,{eventId:a.id,event:a,isOwner:m})]})]})}function Ue({isOpen:a,onClose:s,onConfirm:n,title:d,message:l,type:m="confirm"}){return a?e.jsx("div",{className:"modal-overlay",onClick:s,children:e.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{children:d}),e.jsx("button",{className:"modal-close",onClick:s,children:"Ã—"})]}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:l})}),e.jsx("div",{className:"modal-footer",children:m==="confirm"?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"btn btn-secondary",onClick:s,children:"Cancel"}),e.jsx("button",{className:"btn btn-danger",onClick:()=>{n(),s()},children:"Delete"})]}):e.jsx("button",{className:"btn btn-primary",onClick:s,children:"OK"})})]})}):null}function Me({stats:a,events:s}){const n=Array.isArray(a==null?void 0:a.monthlyData)?a.monthlyData:[{name:"Jan",events:0,certs:0},{name:"Feb",events:0,certs:0},{name:"Mar",events:0,certs:0},{name:"Apr",events:0,certs:0},{name:"May",events:0,certs:0},{name:"Jun",events:0,certs:0},{name:"Jul",events:0,certs:0},{name:"Aug",events:0,certs:0},{name:"Sep",events:0,certs:0},{name:"Oct",events:0,certs:0},{name:"Nov",events:0,certs:0},{name:"Dec",events:0,certs:0}];return e.jsx("div",{className:"analytics-section single-chart",children:e.jsxs("div",{className:"chart-card activity-card",children:[e.jsx("h4",{children:"Monthly Activity"}),e.jsx(be,{width:"100%",height:400,children:e.jsxs(ye,{data:n,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(we,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Se,{dataKey:"name",axisLine:!1,tickLine:!1,interval:0,tick:{fontSize:12}}),e.jsx(Ce,{axisLine:!1,tickLine:!1}),e.jsx(Ee,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),e.jsx(Ae,{}),e.jsx(ce,{dataKey:"events",fill:"#6366f1",radius:[6,6,0,0],name:"Events Uploaded",barSize:30}),e.jsx(ce,{dataKey:"certs",fill:"#f43f5e",radius:[6,6,0,0],name:"Certificates Sent",barSize:30})]})})]})})}function Oe(){const[a,s]=r.useState([]),[n,d]=r.useState(!1);r.useEffect(()=>{l();const c=setInterval(l,3e4);return()=>clearInterval(c)},[]);const l=async()=>{try{const c=await F.getRequests();s(Array.isArray(c)?c:[])}catch(c){console.error("Failed to load requests:",c)}},m=async c=>{var o,u;d(!0);try{await F.acceptRequest(c),await l(),window.location.reload()}catch(x){alert(((u=(o=x.response)==null?void 0:o.data)==null?void 0:u.error)||"Failed to accept request")}finally{d(!1)}},b=async c=>{var o,u;d(!0);try{await F.declineRequest(c),await l()}catch(x){alert(((u=(o=x.response)==null?void 0:o.data)==null?void 0:u.error)||"Failed to decline request")}finally{d(!1)}};return a.length===0?null:e.jsxs("div",{className:"collaboration-requests-widget",children:[e.jsxs("h3",{children:["ðŸ“© Collaboration Requests (",a.length,")"]}),e.jsx("div",{className:"requests-list",children:a.map(c=>e.jsxs("div",{className:"request-card",children:[e.jsxs("div",{className:"request-info",children:[e.jsx("h4",{children:c.eventName}),e.jsxs("p",{children:["From: ",e.jsx("strong",{children:c.senderName})," (",c.senderEmail,")"]}),e.jsx("span",{className:"request-date",children:new Date(c.createdAt).toLocaleDateString()})]}),e.jsxs("div",{className:"request-actions",children:[e.jsx("button",{className:"btn-accept",onClick:()=>m(c.id),disabled:n,children:"âœ“ Accept"}),e.jsx("button",{className:"btn-decline",onClick:()=>b(c.id),disabled:n,children:"âœ— Decline"})]})]},c.id))})]})}function _e({events:a,onEventSelect:s,onDeleteRequest:n,onRefresh:d,onNotify:l}){const[m,b]=r.useState(!1),[c,o]=r.useState({eventName:"",eventDate:"",organizerName:"",instituteName:""}),[u,x]=r.useState(""),[A,T]=r.useState(!1),y=j=>{o({...c,[j.target.name]:j.target.value})},k=async j=>{var w,I;j.preventDefault(),x(""),T(!0);try{await ie.createEvent(c),d(),l==null||l("success",`Event "${c.eventName}" created successfully`),b(!1),o({eventName:"",eventDate:"",organizerName:"",instituteName:""})}catch(q){x(((I=(w=q.response)==null?void 0:w.data)==null?void 0:I.error)||"Failed to create event")}finally{T(!1)}},D=(j,w)=>{j.stopPropagation(),n(w)};return e.jsxs("div",{className:"event-section",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("h2",{children:"My Events"}),e.jsx("button",{onClick:()=>b(!m),className:"btn btn-primary",children:m?"Cancel":"+ Create Event"})]}),m&&e.jsxs("div",{className:"card",children:[e.jsx("h3",{children:"Create New Event"}),u&&e.jsx("div",{className:"alert alert-error",children:u}),e.jsxs("form",{onSubmit:k,children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Event Name"}),e.jsx("input",{type:"text",name:"eventName",className:"form-input",placeholder:"Annual Tech Summit 2024",value:c.eventName,onChange:y,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Event Date"}),e.jsx("input",{type:"date",name:"eventDate",className:"form-input",min:new Date().toISOString().split("T")[0],value:c.eventDate,onChange:y,required:!0})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Organizer Name"}),e.jsx("input",{type:"text",name:"organizerName",className:"form-input",placeholder:"Dr. John Smith",value:c.organizerName,onChange:y,required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"Institute Name (Optional)"}),e.jsx("input",{type:"text",name:"instituteName",className:"form-input",placeholder:"ABC University",value:c.instituteName,onChange:y})]})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:A,children:A?"Creating...":"Create Event"})]})]}),e.jsx("div",{className:"events-grid",children:!Array.isArray(a)||a.length===0?e.jsx("div",{className:"card empty-state",children:e.jsx("p",{children:"No events yet. Create your first event to get started!"})}):Array.isArray(a)&&a.map(j=>e.jsxs("div",{className:"event-card",children:[e.jsx("button",{className:"delete-event-btn",onClick:w=>D(w,j.id),title:"Delete Event",children:"Ã—"}),e.jsxs("div",{className:"event-card-header",children:[e.jsxs("div",{className:"event-date-badge",children:[e.jsx("span",{className:"event-date-day",children:j.eventDate||j.event_date?new Date(j.eventDate||j.event_date).getDate():"--"}),e.jsx("span",{className:"event-date-month",children:j.eventDate||j.event_date?new Date(j.eventDate||j.event_date).toLocaleString("default",{month:"short"}):"---"})]}),e.jsxs("div",{className:"event-card-title-group",children:[e.jsx("h3",{children:j.eventName||j.event_name||"Untitled Event"}),e.jsx("p",{className:"event-institute-text",children:j.instituteName||j.institute_name||"General Event"})]})]}),e.jsxs("div",{className:"event-card-body",children:[e.jsxs("div",{className:"event-info-item",children:[e.jsx("span",{className:"info-icon",children:"ðŸ‘¤"}),e.jsx("span",{className:"event-organizer",children:j.organizerName||j.organizer_name||"Organizer"})]}),e.jsxs("div",{className:"event-info-item",children:[e.jsx("span",{className:"info-icon",children:"ðŸ“…"}),e.jsx("span",{className:"event-full-date",children:j.eventDate||j.event_date?new Date(j.eventDate||j.event_date).toLocaleDateString():"No date"})]})]}),e.jsx("div",{className:"card-footer",children:e.jsxs("span",{className:"manage-link",onClick:()=>s(j),children:["Manage Event ",e.jsx("span",{children:"â†’"})]})})]},j.id))})]})}function Ge(){const a=re(),[s,n]=r.useState(null),[d,l]=r.useState([]),[m,b]=r.useState({totalEvents:0,totalCertificates:0}),[c,o]=r.useState(!0),[u,x]=r.useState(null),[A,T]=r.useState("participants"),[y,k]=r.useState({isOpen:!1,eventId:null}),[D,j]=r.useState([]),[w,I]=r.useState(!1),[q,R]=r.useState(!1),[L,X]=r.useState([]),[E,M]=r.useState(!1),z=r.useRef(null),t=r.useRef(null);r.useEffect(()=>{function N(i){z.current&&!z.current.contains(i.target)&&M(!1),t.current&&!t.current.contains(i.target)&&I(!1)}return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[]),r.useEffect(()=>{L.length>0&&window.navigator.vibrate&&window.navigator.vibrate([100,50,100])},[L.length]),r.useEffect(()=>{U(),h();const N=setInterval(h,1e4);return()=>clearInterval(N)},[]);const h=async()=>{try{const[N,i,v,C]=await Promise.all([F.getRequests(),F.getSentRequests(),F.getOwnedEventsLogs(),ne.getUnreadMessages()]);X(Array.isArray(N)?N:[]),Array.isArray(C)&&C.forEach(p=>{const $=`msg_${p.id}`,G=localStorage.getItem($);j(O=>{const P=p.id;if(JSON.parse(localStorage.getItem("dismissed_notif_ids")||"[]").includes(P)||O.some(W=>W.id===P||W.msgId===P))return O;const te={id:P,msgId:P,type:"info",message:`New message from ${p.senderName||"Unknown"}: ${p.content?p.content.substring(0,30)+(p.content.length>30?"...":""):""}`,time:new Date(p.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),eventId:p.eventId,targetTab:"messages"};return G||(R(!0),setTimeout(()=>R(!1),500),localStorage.setItem($,"true")),[te,...O].slice(0,10)})}),Array.isArray(i)&&i.forEach(p=>{const $=p.status==="ACCEPTED"?"accepted":"declined",G=`sent_req_${p.id}_${p.status}`,O=localStorage.getItem(G);j(P=>{const ae=`req_${p.id}_${p.status}`;if(JSON.parse(localStorage.getItem("dismissed_notif_ids")||"[]").includes(ae)||P.some(he=>he.id===ae))return P;const W={id:ae,type:p.status==="ACCEPTED"?"success":"info",message:`${p.senderName} ${$} your invitation for ${p.eventName}`,time:"Update",eventId:p.eventId,targetTab:"team"};return O||(R(!0),setTimeout(()=>R(!1),500),localStorage.setItem(G,"true")),[W,...P].slice(0,10)})}),Array.isArray(v)&&v.forEach(p=>{const $=`action_log_${p.id}`,G=localStorage.getItem($);j(O=>{const P=`log_${p.id}`;if(JSON.parse(localStorage.getItem("dismissed_notif_ids")||"[]").includes(P)||O.some(W=>W.id===P))return O;const te={id:P,type:"info",message:`${p.userName} ${p.action?p.action.toLowerCase().replace("_"," "):""} ${p.details||""}`,time:new Date(p.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),eventId:p.eventId,targetTab:p.details&&p.details.toLowerCase().includes("participant")?"participants":"team"};return G||(R(!0),setTimeout(()=>R(!1),500),localStorage.setItem($,"true")),[te,...O].slice(0,10)})})}catch(N){console.error("Failed to load requests:",N)}},f=async N=>{try{await F.acceptRequest(N),_("success","Invitation accepted!"),h(),U()}catch{_("error","Failed to accept invitation")}},g=async N=>{try{await F.declineRequest(N),_("info","Invitation declined"),h()}catch{_("error","Failed to decline invitation")}},U=async()=>{o(!0);try{const N=J.getCurrentUser();n(N);const[i,v]=await Promise.all([ie.getAllEvents(),ke.getStats()]);Array.isArray(i)?l(i):i&&Array.isArray(i.events)?l(i.events):l([]),b(v)}catch(N){console.error("Failed to load data:",N)}finally{o(!1)}},Y=()=>{J.logout(),a("/login")},_=(N,i,v=null,C=null)=>{const p={id:Date.now(),type:N,message:i,time:"Just now",eventId:v,targetTab:C};j($=>[p,...$].slice(0,10)),R(!0),setTimeout(()=>R(!1),500)},K=N=>{if(N.eventId){const i=d.find(v=>Number(v.id)===Number(N.eventId));i&&(T(N.targetTab||"participants"),x(i),I(!1))}},Q=(N,i)=>{N.stopPropagation(),j(C=>C.filter(p=>p.id!==i));const v=JSON.parse(localStorage.getItem("dismissed_notif_ids")||"[]");v.includes(i)||(v.push(i),localStorage.setItem("dismissed_notif_ids",JSON.stringify(v)))},Z=N=>{T("participants"),x(N)},ee=()=>{x(null),U()},V=async()=>{var N,i,v;try{await ie.deleteEvent(y.eventId),_("success",`Event "${(N=d.find(C=>C.id===y.eventId))==null?void 0:N.eventName}" deleted`),U()}catch(C){_("error",((v=(i=C.response)==null?void 0:i.data)==null?void 0:v.error)||"Failed to delete event")}};return c?e.jsx("div",{className:"spinner"}):u?e.jsx(ze,{event:u,initialTab:A,onBack:ee,onNotify:_}):e.jsxs("div",{className:"dashboard-container",children:[e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"navbar-content",children:[e.jsx("div",{className:"navbar-brand",children:e.jsxs("div",{className:"brand-logo-container",children:[e.jsx("img",{src:"/assets/bharti_logo.png",alt:"Logo",className:"navbar-logo"}),e.jsxs("div",{className:"brand-text-container",children:[e.jsx("h2",{children:"CertiCraft"}),e.jsx("div",{className:"brand-line"})]})]})}),e.jsxs("div",{className:"secondary-actions",children:[e.jsxs("div",{className:"navbar-actions",children:[e.jsxs("div",{className:"notifications-container",ref:t,children:[e.jsxs("button",{className:`notifications-btn ${q?"vibrate-bt":""}`,onClick:()=>{I(!w),M(!1)},title:"Notifications",children:[e.jsx("i",{className:"fa-solid fa-bell",style:{fontSize:"18px",color:"#1e3a8a"}}),D.length>0&&e.jsx("span",{className:"notification-badge",children:D.length})]}),w&&e.jsxs("div",{className:"notifications-dropdown",children:[e.jsx("div",{className:"notifications-header",children:e.jsx("h3",{children:"Notifications"})}),e.jsx("div",{className:"notifications-list",children:D.length===0?e.jsx("div",{className:"notification-item",style:{textAlign:"center",color:"#888"},children:"No new notifications"}):Array.isArray(D)&&D.map(N=>e.jsx("div",{className:`notification-item ${N.type} ${N.eventId?"clickable":""}`,onClick:()=>K(N),children:e.jsxs("div",{className:"notification-content",children:[e.jsx("div",{className:"notification-message",children:N.message}),e.jsxs("div",{className:"notification-meta",children:[e.jsx("span",{className:"notification-time",children:N.time}),e.jsx("button",{className:"dismiss-notif-btn",onClick:i=>Q(i,N.id),title:"Dismiss",children:e.jsx("i",{className:"fa-solid fa-xmark"})})]})]})},N.id))})]})]}),e.jsxs("div",{className:"notifications-container",style:{marginLeft:"12px"},ref:z,children:[e.jsxs("button",{className:`notifications-btn ${L.length>0?"vibrate-bt":""}`,onClick:()=>{M(!E),I(!1)},title:"Collaboration Requests",children:[e.jsx("i",{className:"fa-solid fa-user-plus",style:{fontSize:"18px",color:"#1e3a8a"}}),Array.isArray(L)&&L.length>0&&e.jsx("span",{className:"notification-badge",style:{background:"#333",color:"white"},children:L.length})]}),E&&e.jsxs("div",{className:"notifications-dropdown minimal-dropdown",style:{width:"320px",right:"0"},children:[e.jsx("div",{className:"notifications-header minimal-header",children:e.jsx("h3",{children:"Team invitations"})}),e.jsx("div",{className:"notifications-list",children:!Array.isArray(L)||L.length===0?e.jsx("div",{className:"notification-item",style:{justifyContent:"center",color:"#888"},children:"No pending invitations"}):Array.isArray(L)&&L.map(N=>e.jsxs("div",{className:"notification-item",style:{display:"block"},children:[e.jsxs("div",{className:"notification-message",style:{marginBottom:"8px"},children:[e.jsx("strong",{children:N.eventName}),e.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:["From: ",N.senderName]})]}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("button",{className:"btn btn-sm",style:{background:"#4caf50",color:"white",flex:1},onClick:()=>f(N.id),children:"Accept"}),e.jsx("button",{className:"btn btn-sm",style:{background:"#f44336",color:"white",flex:1},onClick:()=>g(N.id),children:"Decline"})]})]},N.id))})]})]})]}),e.jsx("button",{onClick:Y,className:"btn btn-secondary btn-sm",children:"Logout"})]})]})}),e.jsxs("div",{className:"container",children:[e.jsx("div",{className:"dashboard-header",children:e.jsxs("div",{className:"welcome-banner",children:[e.jsx("span",{className:"welcome-label",children:"Welcome back,"}),e.jsx("h2",{className:"welcome-user",children:s==null?void 0:s.fullName})]})}),e.jsx(_e,{events:d,onEventSelect:Z,onDeleteRequest:N=>k({isOpen:!0,eventId:N}),onRefresh:U,onNotify:_}),e.jsxs("div",{className:"stats-container",children:[e.jsxs("div",{className:"stats-card",children:[e.jsx("h4",{children:"Total Events"}),e.jsx("div",{className:"stats-value",children:m.totalEvents})]}),e.jsxs("div",{className:"stats-card",children:[e.jsx("h4",{children:"Certificates Generated"}),e.jsx("div",{className:"stats-value",children:m.totalCertificates})]})]}),e.jsx(Oe,{}),e.jsx(Me,{stats:m,events:d})]}),e.jsx(Ue,{isOpen:y.isOpen,onClose:()=>k({isOpen:!1,eventId:null}),onConfirm:V,title:"Delete Event",message:"Are you sure you want to delete this event? All participants and certificates will be permanently removed."})]})}function Xe(){const a=re(),[s]=xe();return r.useEffect(()=>{const n=s.get("token"),d=s.get("fullName"),l=s.get("email"),m=s.get("id");n?(localStorage.setItem("token",n),d&&l&&localStorage.setItem("user",JSON.stringify({id:m?parseInt(m):null,fullName:d,email:l})),setTimeout(()=>{a("/dashboard")},3e3)):a("/login?error=oauth_failed")},[s,a]),e.jsx(le,{})}function Ye(){const{verificationId:a}=ve(),[s,n]=r.useState(null),[d,l]=r.useState(!0),[m,b]=r.useState(null);r.useEffect(()=>{a&&c()},[a]);const c=async()=>{try{l(!0);const o=await fetch(`/api/certificates/verify/${a}`);if(!o.ok)throw new Error("Certificate not found or invalid");const u=await o.json();n(u)}catch(o){b(o.message)}finally{l(!1)}};return d?e.jsx("div",{className:"verification-container",children:e.jsx("div",{className:"verification-card",style:{display:"block",padding:"60px"},children:e.jsxs("div",{className:"loader-container",children:[e.jsx("div",{className:"loader"}),e.jsx("p",{className:"loading-text",children:"Verifying Authenticity..."})]})})}):m?e.jsx("div",{className:"verification-container",children:e.jsxs("div",{className:"verification-card",style:{display:"block",maxWidth:"500px",textAlign:"center",padding:"40px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"âš ï¸"}),e.jsxs("div",{className:"verification-status",children:[e.jsx("h1",{children:"Certificate Invalid"}),e.jsx("p",{className:"error-message",children:m}),e.jsx("span",{className:"error-badge",children:"Verification Failed"}),e.jsx("p",{style:{marginTop:"20px",fontSize:"13px",color:"#94a3b8"},children:"We could not verify this certificate. It may be invalid or revoked."})]})]})}):e.jsx("div",{className:"verification-container",children:e.jsxs("div",{className:"verification-card",children:[e.jsxs("div",{className:"card-left",children:[e.jsx("div",{className:"logo-container",children:e.jsx("img",{src:"/bv_full_logo_v2.png",alt:"Bharati Vidyapeeth Logo",onError:o=>o.target.style.display="none"})}),e.jsx("div",{className:"university-info",children:e.jsx("p",{className:"university-description",children:"Bharati Vidyapeeth (Deemed to be University) is a premier institute of higher learning in India. Established in 1964, it is known for its academic excellence and innovative research across disciplined fields. The National Institutional Ranking Framework (NIRF) ranked Bharati Vidyapeeth 78th among universities for 2024. The university's constituent engineering college, Bharati Vidyapeeth Deemed University College of Engineering, Pune was ranked in the 151-200 band in 2024."})}),e.jsx("div",{className:"trusted-text-container",children:e.jsx("p",{children:"Trusted verification by CertiCraft"})})]}),e.jsxs("div",{className:"card-right",children:[e.jsxs("div",{className:"detail-group",children:[e.jsx("span",{className:"detail-label",children:"Certified Participant"}),e.jsx("span",{className:"detail-value highlight",children:s.participantName})]}),e.jsxs("div",{className:"detail-group",children:[e.jsx("span",{className:"detail-label",children:"Event Name"}),e.jsx("span",{className:"detail-value",children:s.eventName})]}),e.jsxs("div",{style:{display:"flex",gap:"20px"},children:[e.jsxs("div",{className:"detail-group",style:{flex:1},children:[e.jsx("span",{className:"detail-label",children:"Issue Date"}),e.jsx("span",{className:"detail-value",children:new Date(s.generatedAt).toLocaleDateString()})]}),e.jsx("div",{className:"detail-group",style:{flex:1}})]}),e.jsxs("div",{className:"detail-group",children:[e.jsx("span",{className:"detail-label",children:"Organized By"}),e.jsx("span",{className:"detail-value",children:s.organizerName})]}),e.jsxs("div",{className:"detail-group",children:[e.jsx("span",{className:"detail-label",children:"Verification ID"}),e.jsx("span",{className:"verification-id",children:s.verificationId})]}),e.jsx("div",{className:"verification-footer",children:"Securely verified. Reference ID is unique to this document."})]})]})})}function Be({children:a}){return J.isAuthenticated()?a:e.jsx(ue,{to:"/login",replace:!0})}function Je(){return e.jsx(fe,{children:e.jsxs(Ne,{children:[e.jsx(H,{path:"/",element:e.jsx(ue,{to:"/login",replace:!0})}),e.jsx(H,{path:"/login",element:e.jsx(De,{})}),e.jsx(H,{path:"/register",element:e.jsx(Te,{})}),e.jsx(H,{path:"/oauth/callback",element:e.jsx(Xe,{})}),e.jsx(H,{path:"/verify/:verificationId",element:e.jsx(Ye,{})}),e.jsx(H,{path:"/dashboard",element:e.jsx(Be,{children:e.jsx(Ge,{})})})]})})}class Ve extends de.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,n){this.setState({error:s,errorInfo:n}),console.error("Uncaught error:",s,n)}render(){return this.state.hasError?e.jsxs("div",{style:{padding:"20px",fontFamily:"monospace"},children:[e.jsx("h1",{children:"Something went wrong."}),e.jsxs("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),e.jsx("br",{}),this.state.errorInfo&&this.state.errorInfo.componentStack]})]}):this.props.children}}pe.createRoot(document.getElementById("root")).render(e.jsx(de.StrictMode,{children:e.jsx(Ve,{children:e.jsx(Je,{})})}));
