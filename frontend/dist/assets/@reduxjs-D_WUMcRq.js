var wt=Object.defineProperty;var vt=(e,t,r)=>t in e?wt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var fe=(e,t,r)=>vt(e,typeof t!="symbol"?t+"":t,r);import{i as He,a as gt,c as Ct,b as Pt,d as he,e as St}from"./redux-BXkGT1VS.js";import{t as Et,w as kt}from"./redux-thunk-ClJT1hhx.js";var Ke=Symbol.for("immer-nothing"),Oe=Symbol.for("immer-draftable"),g=Symbol.for("immer-state");function E(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var P=Object,N=P.getPrototypeOf,J="constructor",re="prototype",_e="configurable",Q="enumerable",X="writable",$="value",R=e=>!!e&&!!e[g];function k(e){var t;return e?Xe(e)||ne(e)||!!e[Oe]||!!((t=e[J])!=null&&t[Oe])||ie(e)||se(e):!1}var bt=P[re][J].toString(),ze=new WeakMap;function Xe(e){if(!e||!Ee(e))return!1;const t=N(e);if(t===null||t===P[re])return!0;const r=P.hasOwnProperty.call(t,J)&&t[J];if(r===Object)return!0;if(!F(r))return!1;let n=ze.get(r);return n===void 0&&(n=Function.toString.call(r),ze.set(r,n)),n===bt}function W(e,t,r=!0){V(e)===0?(r?Reflect.ownKeys(e):P.keys(e)).forEach(i=>{t(i,e[i],e)}):e.forEach((n,i)=>t(i,n,e))}function V(e){const t=e[g];return t?t.type_:ne(e)?1:ie(e)?2:se(e)?3:0}var Le=(e,t,r=V(e))=>r===2?e.has(t):P[re].hasOwnProperty.call(e,t),ye=(e,t,r=V(e))=>r===2?e.get(t):e[t],Y=(e,t,r,n=V(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Tt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var ne=Array.isArray,ie=e=>e instanceof Map,se=e=>e instanceof Set,Ee=e=>typeof e=="object",F=e=>typeof e=="function",le=e=>typeof e=="boolean";function Mt(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var A=e=>e.copy_||e.base_,ke=e=>e.modified_?e.copy_:e.base_;function pe(e,t){if(ie(e))return new Map(e);if(se(e))return new Set(e);if(ne(e))return Array[re].slice.call(e);const r=Xe(e);if(t===!0||t==="class_only"&&!r){const n=P.getOwnPropertyDescriptors(e);delete n[g];let i=Reflect.ownKeys(n);for(let s=0;s<i.length;s++){const o=i[s],c=n[o];c[X]===!1&&(c[X]=!0,c[_e]=!0),(c.get||c.set)&&(n[o]={[_e]:!0,[X]:!0,[Q]:c[Q],[$]:e[o]})}return P.create(N(e),n)}else{const n=N(e);if(n!==null&&r)return{...e};const i=P.create(n);return P.assign(i,e)}}function be(e,t=!1){return oe(e)||R(e)||!k(e)||(V(e)>1&&P.defineProperties(e,{set:q,add:q,clear:q,delete:q}),P.freeze(e),t&&W(e,(r,n)=>{be(n,!0)},!1)),e}function At(){E(2)}var q={[$]:At};function oe(e){return e===null||!Ee(e)?!0:P.isFrozen(e)}var Z="MapSet",me="Patches",Fe="ArrayMethods",Ge={};function L(e){const t=Ge[e];return t||E(0,e),t}var Ie=e=>!!Ge[e],j,Je=()=>j,Rt=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Ie(Z)?L(Z):void 0,arrayMethodsPlugin_:Ie(Fe)?L(Fe):void 0});function Ne(e,t){t&&(e.patchPlugin_=L(me),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function we(e){ve(e),e.drafts_.forEach(Dt),e.drafts_=null}function ve(e){e===j&&(j=e.parent_)}var xe=e=>j=Rt(j,e);function Dt(e){const t=e[g];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Be(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[g].modified_&&(we(t),E(4)),k(e)&&(e=$e(t,e));const{patchPlugin_:i}=t;i&&i.generateReplacementPatches_(r[g].base_,e,t)}else e=$e(t,r);return Ot(t,e,!0),we(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ke?e:void 0}function $e(e,t){if(oe(t))return t;const r=t[g];if(!r)return Te(t,e.handledSet_,e);if(!ce(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);Ze(r,e)}return r.copy_}function Ot(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&be(t,r)}function Qe(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ce=(e,t)=>e.scope_===t,zt=[];function Ye(e,t,r,n){const i=A(e),s=e.type_;if(n!==void 0&&ye(i,n,s)===t){Y(i,n,r,s);return}if(!e.draftLocations_){const c=e.draftLocations_=new Map;W(i,(f,l)=>{if(R(l)){const a=c.get(l)||[];a.push(f),c.set(l,a)}})}const o=e.draftLocations_.get(t)??zt;for(const c of o)Y(i,c,r,s)}function Lt(e,t,r){e.callbacks_.push(function(i){var c;const s=t;if(!s||!ce(s,i))return;(c=i.mapSetPlugin_)==null||c.fixSetContents(s);const o=ke(s);Ye(e,s.draft_??s,o,r),Ze(s,i)})}function Ze(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:i}=t;if(i){const s=i.getPath(e);s&&i.generatePatches_(e,s,t)}Qe(e)}}function Ft(e,t,r){const{scope_:n}=e;if(R(r)){const i=r[g];ce(i,n)&&i.callbacks_.push(function(){G(e);const o=ke(i);Ye(e,r,o,t)})}else k(r)&&e.callbacks_.push(function(){const s=A(e);ye(s,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Te(ye(e.copy_,t,e.type_),n.handledSet_,n)})}function Te(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||R(e)||t.has(e)||!k(e)||oe(e)||(t.add(e),W(e,(n,i)=>{if(R(i)){const s=i[g];if(ce(s,r)){const o=ke(s);Y(e,n,o,e.type_),Qe(s)}}else k(i)&&Te(i,t,r)})),e}function It(e,t){const r=ne(e),n={type_:r?1:0,scope_:t?t.scope_:Je(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=n,s=Me;r&&(i=[n],s=U);const{revoke:o,proxy:c}=Proxy.revocable(i,s);return n.draft_=c,n.revoke_=o,[c,n]}var Me={get(e,t){if(t===g)return e;let r=e.scope_.arrayMethodsPlugin_;const n=e.type_===1&&typeof t=="string";if(n&&r!=null&&r.isArrayOperationMethod(t))return r.createMethodInterceptor(e,t);const i=A(e);if(!Le(i,t,e.type_))return Nt(e,i,t);const s=i[t];if(e.finalized_||!k(s)||n&&e.operationMethod&&(r!=null&&r.isMutatingArrayMethod(e.operationMethod))&&Mt(t))return s;if(s===de(e.base_,t)){G(e);const o=e.type_===1?+t:t,c=Ce(e.scope_,s,e,o);return e.copy_[o]=c}return s},has(e,t){return t in A(e)},ownKeys(e){return Reflect.ownKeys(A(e))},set(e,t,r){const n=et(A(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const i=de(A(e),t),s=i==null?void 0:i[g];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Tt(r,i)&&(r!==void 0||Le(e.base_,t,e.type_)))return!0;G(e),ge(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Ft(e,t,r)),!0},deleteProperty(e,t){return G(e),de(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),ge(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=A(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[X]:!0,[_e]:e.type_!==1||t!=="length",[Q]:n[Q],[$]:r[t]}},defineProperty(){E(11)},getPrototypeOf(e){return N(e.base_)},setPrototypeOf(){E(12)}},U={};W(Me,(e,t)=>{U[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});U.deleteProperty=function(e,t){return U.set.call(this,e,t,void 0)};U.set=function(e,t,r){return Me.set.call(this,e[0],t,r,e[0])};function de(e,t){const r=e[g];return(r?A(r):e)[t]}function Nt(e,t,r){var i;const n=et(t,r);return n?$ in n?n[$]:(i=n.get)==null?void 0:i.call(e.draft_):void 0}function et(e,t){if(!(t in e))return;let r=N(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=N(r)}}function ge(e){e.modified_||(e.modified_=!0,e.parent_&&ge(e.parent_))}function G(e){e.copy_||(e.assigned_=new Map,e.copy_=pe(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var xt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(t,r,n)=>{if(F(t)&&!F(r)){const s=r;r=t;const o=this;return function(f=s,...l){return o.produce(f,a=>r.call(this,a,...l))}}F(r)||E(6),n!==void 0&&!F(n)&&E(7);let i;if(k(t)){const s=xe(this),o=Ce(s,t,void 0);let c=!0;try{i=r(o),c=!1}finally{c?we(s):ve(s)}return Ne(s,n),Be(i,s)}else if(!t||!Ee(t)){if(i=r(t),i===void 0&&(i=t),i===Ke&&(i=void 0),this.autoFreeze_&&be(i,!0),n){const s=[],o=[];L(me).generateReplacementPatches_(t,i,{patches_:s,inversePatches_:o}),n(s,o)}return i}else E(1,t)},this.produceWithPatches=(t,r)=>{if(F(t))return(o,...c)=>this.produceWithPatches(o,f=>t(f,...c));let n,i;return[this.produce(t,r,(o,c)=>{n=o,i=c}),n,i]},le(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),le(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),le(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){k(e)||E(8),R(e)&&(e=Bt(e));const t=xe(this),r=Ce(t,e,void 0);return r[g].isManual_=!0,ve(t),r}finishDraft(e,t){const r=e&&e[g];(!r||!r.isManual_)&&E(9);const{scope_:n}=r;return Ne(n,t),Be(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const i=t[r];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}r>-1&&(t=t.slice(r+1));const n=L(me).applyPatches_;return R(e)?n(e,t):this.produce(e,i=>n(i,t))}};function Ce(e,t,r,n){const[i,s]=ie(t)?L(Z).proxyMap_(t,r):se(t)?L(Z).proxySet_(t,r):It(t,r);return((r==null?void 0:r.scope_)??Je()).drafts_.push(i),s.callbacks_=(r==null?void 0:r.callbacks_)??[],s.key_=n,r&&n!==void 0?Lt(r,s,n):s.callbacks_.push(function(f){var a;(a=f.mapSetPlugin_)==null||a.fixSetContents(s);const{patchPlugin_:l}=f;s.modified_&&l&&l.generatePatches_(s,[],f)}),i}function Bt(e){return R(e)||E(10,e),tt(e)}function tt(e){if(!k(e)||oe(e))return e;const t=e[g];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=pe(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=pe(e,!0);return W(r,(i,s)=>{Y(r,i,tt(s))},n),t&&(t.finalized_=!1),r}var $t=new xt,rt=$t.produce,jt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?he:he.apply(null,arguments)};function x(e,t){function r(...n){if(t){let i=t(...n);if(!i)throw new Error(S(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>He(n)&&n.type===e,r}var nt=class B extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,B.prototype)}static get[Symbol.species](){return B}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new B(...t[0].concat(this)):new B(...t.concat(this))}};function je(e){return k(e)?rt(e,()=>{}):e}function H(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Ut(e){return typeof e=="boolean"}var Wt=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new nt;return r&&(Ut(r)?o.push(Et):o.push(kt(r.extraArgument))),o},it="RTK_autoBatch",wr=()=>e=>({payload:e,meta:{[it]:!0}}),Ue=e=>t=>{setTimeout(t,e)},Vt=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let i=!0,s=!1,o=!1;const c=new Set,f=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ue(10):e.type==="callback"?e.queueNotification:Ue(e.timeout),l=()=>{o=!1,s&&(s=!1,c.forEach(a=>a()))};return Object.assign({},n,{subscribe(a){const _=()=>i&&a(),v=n.subscribe(_);return c.add(a),()=>{v(),c.delete(a)}},dispatch(a){var _;try{return i=!((_=a==null?void 0:a.meta)!=null&&_[it]),s=!i,s&&(o||(o=!0,f(l))),n.dispatch(a)}finally{i=!0}}})},qt=e=>function(r){const{autoBatch:n=!0}=r??{};let i=new nt(e);return n&&i.push(Vt(typeof n=="object"?n:void 0)),i};function vr(e){const t=Wt(),{reducer:r=void 0,middleware:n,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(gt(r))c=Ct(r);else throw new Error(S(1));let f;typeof n=="function"?f=n(t):f=t();let l=he;i&&(l=jt({trace:!1,...typeof i=="object"&&i}));const a=Pt(...f),_=qt(a);let v=typeof o=="function"?o(_):_();const u=l(...v);return St(c,s,u)}function st(e){const t={},r=[];let n;const i={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(S(28));if(c in t)throw new Error(S(29));return t[c]=o,i},addAsyncThunk(s,o){return o.pending&&(t[s.pending.type]=o.pending),o.rejected&&(t[s.rejected.type]=o.rejected),o.fulfilled&&(t[s.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return r.push({matcher:s,reducer:o}),i},addDefaultCase(s){return n=s,i}};return e(i),[t,r,n]}function Ht(e){return typeof e=="function"}function Kt(e,t){let[r,n,i]=st(t),s;if(Ht(e))s=()=>je(e());else{const c=je(e);s=()=>c}function o(c=s(),f){let l=[r[f.type],...n.filter(({matcher:a})=>a(f)).map(({reducer:a})=>a)];return l.filter(a=>!!a).length===0&&(l=[i]),l.reduce((a,_)=>{if(_)if(R(a)){const u=_(a,f);return u===void 0?a:u}else{if(k(a))return rt(a,v=>_(v,f));{const v=_(a,f);if(v===void 0){if(a===null)return a;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return a},c)}return o.getInitialState=s,o}var Xt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Gt=(e=21)=>{let t="",r=e;for(;r--;)t+=Xt[Math.random()*64|0];return t},Jt=Symbol.for("rtk-slice-createasyncthunk");function Qt(e,t){return`${e}/${t}`}function Yt({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Jt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(S(11));const c=(typeof i.reducers=="function"?i.reducers(er()):i.reducers)||{},f=Object.keys(c),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},a={addCase(d,h){const p=typeof d=="string"?d:d.type;if(!p)throw new Error(S(12));if(p in l.sliceCaseReducersByType)throw new Error(S(13));return l.sliceCaseReducersByType[p]=h,a},addMatcher(d,h){return l.sliceMatchers.push({matcher:d,reducer:h}),a},exposeAction(d,h){return l.actionCreators[d]=h,a},exposeCaseReducer(d,h){return l.sliceCaseReducersByName[d]=h,a}};f.forEach(d=>{const h=c[d],p={reducerName:d,type:Qt(s,d),createNotation:typeof i.reducers=="function"};rr(h)?ir(p,h,a,t):tr(p,h,a)});function _(){const[d={},h=[],p=void 0]=typeof i.extraReducers=="function"?st(i.extraReducers):[i.extraReducers],b={...d,...l.sliceCaseReducersByType};return Kt(i.initialState,T=>{for(let C in b)T.addCase(C,b[C]);for(let C of l.sliceMatchers)T.addMatcher(C.matcher,C.reducer);for(let C of h)T.addMatcher(C.matcher,C.reducer);p&&T.addDefaultCase(p)})}const v=d=>d,u=new Map,y=new WeakMap;let m;function M(d,h){return m||(m=_()),m(d,h)}function w(){return m||(m=_()),m.getInitialState()}function D(d,h=!1){function p(T){let C=T[d];return typeof C>"u"&&h&&(C=H(y,p,w)),C}function b(T=v){const C=H(u,h,()=>new WeakMap);return H(C,T,()=>{const De={};for(const[pt,mt]of Object.entries(i.selectors??{}))De[pt]=Zt(mt,T,()=>H(y,T,w),h);return De})}return{reducerPath:d,getSelectors:b,get selectors(){return b(p)},selectSlice:p}}const O={name:s,reducer:M,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:w,...D(o),injectInto(d,{reducerPath:h,...p}={}){const b=h??o;return d.inject({reducerPath:b,reducer:M},p),{...O,...D(b,!0)}}};return O}}function Zt(e,t,r,n){function i(s,...o){let c=t(s);return typeof c>"u"&&n&&(c=r()),e(c,...o)}return i.unwrapped=e,i}var gr=Yt();function er(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function tr({type:e,reducerName:t,createNotation:r},n,i){let s,o;if("reducer"in n){if(r&&!nr(n))throw new Error(S(17));s=n.reducer,o=n.prepare}else s=n;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?x(e,o):x(e))}function rr(e){return e._reducerDefinitionType==="asyncThunk"}function nr(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ir({type:e,reducerName:t},r,n,i){if(!i)throw new Error(S(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:f,settled:l,options:a}=r,_=i(e,s,a);n.exposeAction(t,_),o&&n.addCase(_.fulfilled,o),c&&n.addCase(_.pending,c),f&&n.addCase(_.rejected,f),l&&n.addMatcher(_.settled,l),n.exposeCaseReducer(t,{fulfilled:o||K,pending:c||K,rejected:f||K,settled:l||K})}function K(){}var sr="task",ot="listener",ct="completed",Ae="cancelled",or=`task-${Ae}`,cr=`task-${ct}`,Pe=`${ot}-${Ae}`,ar=`${ot}-${ct}`,ae=class{constructor(e){fe(this,"name","TaskAbortError");fe(this,"message");this.code=e,this.message=`${sr} ${Ae} (reason: ${e})`}},Re=(e,t)=>{if(typeof e!="function")throw new TypeError(S(32))},ee=()=>{},at=(e,t=ee)=>(e.catch(t),e),ut=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),z=e=>{if(e.aborted)throw new ae(e.reason)};function ft(e,t){let r=ee;return new Promise((n,i)=>{const s=()=>i(new ae(e.reason));if(e.aborted){s();return}r=ut(e,s),t.finally(()=>r()).then(n,i)}).finally(()=>{r=ee})}var ur=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ae?"cancelled":"rejected",error:r}}finally{t==null||t()}},te=e=>t=>at(ft(e,t).then(r=>(z(e),r))),lt=e=>{const t=te(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:I}=Object,We={},ue="listenerMiddleware",fr=(e,t)=>{const r=n=>ut(e,()=>n.abort(e.reason));return(n,i)=>{Re(n);const s=new AbortController;r(s);const o=ur(async()=>{z(e),z(s.signal);const c=await n({pause:te(s.signal),delay:lt(s.signal),signal:s.signal});return z(s.signal),c},()=>s.abort(cr));return i!=null&&i.autoJoin&&t.push(o.catch(ee)),{result:te(e)(o),cancel(){s.abort(or)}}}},lr=(e,t)=>{const r=async(n,i)=>{z(t);let s=()=>{};const c=[new Promise((f,l)=>{let a=e({predicate:n,effect:(_,v)=>{v.unsubscribe(),f([_,v.getState(),v.getOriginalState()])}});s=()=>{a(),l()}})];i!=null&&c.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await ft(t,Promise.race(c));return z(t),f}finally{s()}};return(n,i)=>at(r(n,i))},dt=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:s}=e;if(t)i=x(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(!i)throw new Error(S(21));return Re(s),{predicate:i,type:t,effect:s}},ht=I(e=>{const{type:t,predicate:r,effect:n}=dt(e);return{id:Gt(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(S(22))}}},{withTypes:()=>ht}),Ve=(e,t)=>{const{type:r,effect:n,predicate:i}=dt(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===i)&&s.effect===n)},Se=e=>{e.pending.forEach(t=>{t.abort(Pe)})},dr=(e,t)=>()=>{for(const r of t.keys())Se(r);e.clear()},qe=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},_t=I(x(`${ue}/add`),{withTypes:()=>_t}),hr=x(`${ue}/removeAll`),yt=I(x(`${ue}/remove`),{withTypes:()=>yt}),_r=(...e)=>{console.error(`${ue}/error`,...e)},Cr=(e={})=>{const t=new Map,r=new Map,n=u=>{const y=r.get(u)??0;r.set(u,y+1)},i=u=>{const y=r.get(u)??1;y===1?r.delete(u):r.set(u,y-1)},{extra:s,onError:o=_r}=e;Re(o);const c=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),y=>{u.unsubscribe(),y!=null&&y.cancelActive&&Se(u)}),f=u=>{const y=Ve(t,u)??ht(u);return c(y)};I(f,{withTypes:()=>f});const l=u=>{const y=Ve(t,u);return y&&(y.unsubscribe(),u.cancelActive&&Se(y)),!!y};I(l,{withTypes:()=>l});const a=async(u,y,m,M)=>{const w=new AbortController,D=lr(f,w.signal),O=[];try{u.pending.add(w),n(u),await Promise.resolve(u.effect(y,I({},m,{getOriginalState:M,condition:(d,h)=>D(d,h).then(Boolean),take:D,delay:lt(w.signal),pause:te(w.signal),extra:s,signal:w.signal,fork:fr(w.signal,O),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((d,h,p)=>{d!==w&&(d.abort(Pe),p.delete(d))})},cancel:()=>{w.abort(Pe),u.pending.delete(w)},throwIfCancelled:()=>{z(w.signal)}})))}catch(d){d instanceof ae||qe(o,d,{raisedBy:"effect"})}finally{await Promise.all(O),w.abort(ar),i(u),u.pending.delete(w)}},_=dr(t,r);return{middleware:u=>y=>m=>{if(!He(m))return y(m);if(_t.match(m))return f(m.payload);if(hr.match(m)){_();return}if(yt.match(m))return l(m.payload);let M=u.getState();const w=()=>{if(M===We)throw new Error(S(23));return M};let D;try{if(D=y(m),t.size>0){const O=u.getState(),d=Array.from(t.values());for(const h of d){let p=!1;try{p=h.predicate(m,O,M)}catch(b){p=!1,qe(o,b,{raisedBy:"predicate"})}p&&a(h,m,u,w)}}}finally{M=We}return D},startListening:f,stopListening:l,clearListeners:_}};function S(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}export{Bt as a,x as b,gr as c,Cr as d,vr as e,Vt as f,wr as p};
